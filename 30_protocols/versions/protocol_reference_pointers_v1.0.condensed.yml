meta: {v: 1.0.0, created: 2025-12-05, status: active}
related: [schema_pointer_syntax_latest.yml, instr_pointer_loading_latest.yml]

purpose: Transform 30 native memory slots (6KB) from content storage into INDEX referencing unlimited external context

problem:
  native_slots: "30 × 200 chars = 6KB, flat, static"
  solution: "pointers enable hierarchical loading, dynamic queries, lazy loading, unlimited memory"

concepts:
  pointer: {def: "compact string identifying WHERE to find context", format: "<TYPE>:<TARGET> [| <MODIFIER>:<VALUE>]*", max: 200}
  destination_file: {loc: "ai_memories/ or ai_general/", structure: "header + content + optional pointers"}
  lazy_loading:
    "PRIORITY:1 + LOAD:AUTO": conversation start
    "PRIORITY:2 + LOAD:TOPIC": topic detected
    "PRIORITY:3 + LOAD:DEMAND": explicitly needed

types:
  PATH: {format: "TYPE:relative/path.yml", resolution: "Desktop Commander read", example: "STARTER:ai_memories/60_knowledge/about_user/identity.yml"}
  QUERY: {format: "QUERY:<terms> | modifiers", resolution: "memory_search tool", example: "QUERY:CLI coordination | SINCE:14d | LIMIT:5"}
  RECENT: {format: "RECENT:<category> | modifiers", categories: [session_summaries, task_completions, decisions, errors], example: "RECENT:session_summaries | COUNT:3"}

load_behaviors:
  AUTO: {desc: "load at conversation start silently", priority: 1, use: "identity, core prefs, comm style"}
  TOPIC: {desc: "load when topic detected", priority: 2, use: "project context, domain knowledge"}
  DEMAND: {desc: "load only when needed", priority: 3, use: "reference material, specs"}

workflow:
  start: "receive slots → recognize pointers → load PRIORITY:1 AUTO silently → rich context ready"
  mid: "topic matches PRIORITY:2 tags → load TOPIC pointers → context expands"
  demand: "need reference → load PRIORITY:3 → may announce"

slot_allocation: {identity_prefs: 3-5, current_project: 3-5, tool_configs: 2-3, reference: 5-10, reserved: 5-8}

antipatterns:
  - storing_content: "put pointers not facts"
  - loading_everything: "lazy load, not upfront"
  - deep_chains: "max depth 3"
  - circular_refs: "track loaded paths"

integration: {memory_user_edits_tool: "CRUD for slots", desktop_commander: "read destination files", memory_search: "execute QUERY pointers"}

success: [rich context at start, context grows with topics, reference loads on demand, new instances have awareness]
