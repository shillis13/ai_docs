meta: {v: 1.0.0, created: 2025-12-05, maintainer: PianoMan, status: active}
related: [protocol_reference_pointers, instr_pointer_loading]

grammar: "<TYPE>:<TARGET> [| <KEY>:<VALUE>]*"
max_length: 200 chars (must fit native memory slot)

types:
  STARTER: {desc: "core identity/prefs - load first", target: "relative/path.yml", ex: "STARTER:ai_memories/60_knowledge/about_user/identity.yml"}
  PROJECT: {desc: "current work context", target: "relative/path.yml", ex: "PROJECT:ai_claude/work/current_focus.yml"}
  PREFS: {desc: "communication/behavior prefs", target: "relative/path.yml"}
  CONTEXT: {desc: "situational, time-sensitive", target: "relative/path.yml"}
  TOOL: {desc: "tool configs and patterns", target: "relative/path.yml"}
  REF: {desc: "reference material - on-demand only", target: "relative/path.yml"}
  QUERY: {desc: "dynamic search", target: "search terms", ex: "QUERY:CLI timeout | LIMIT:5 | SINCE:30d"}
  RECENT: {desc: "N most recent items", target: "category name", ex: "RECENT:session_summaries | COUNT:3"}

modifiers:
  PRIORITY: {1: "conversation start", 2: "topic arises (default)", 3: "explicitly referenced"}
  LOAD: {AUTO: "without AI decision", TOPIC: "related topic detected (default)", DEMAND: "explicitly requested"}
  SCOPE: {GLOBAL: "all contexts (default)", PROJECT: "specific project", SESSION: "current session only"}
  TTL: {format: "YYYY-MM-DD or Nd", meaning: "review/refresh after", ex: "TTL:7d"}

query_modifiers:
  LIMIT: {type: int, default: 5}
  SINCE: {type: "Nd/Nw/Nm", desc: "results updated within window"}
  SOURCE: {values: [histories, summaries, knowledge, all], default: all}
  SORT: {values: [relevance, recent, oldest], default: relevance}

validation:
  pointer: ["<= 200 chars", "TYPE recognized", "TARGET not empty", "valid modifier keys"]
  path: ["relative to ai_root/", "ends .yml/.yaml", "should resolve (warning if not)"]
  query: ["substantive keywords", "avoid generic terms"]

examples:
  minimal: "STARTER:ai_memories/60_knowledge/about_user/identity.yml (56 chars)"
  with_mods: "PROJECT:ai_claude/work/current_focus.yml | PRIORITY:2 | LOAD:TOPIC | SCOPE:PROJECT (88 chars)"
  query: "QUERY:chat orchestrator design decisions | LIMIT:3 | SINCE:30d (66 chars)"

regex:
  full_pointer: '^(?P<type>[A-Z]+):(?P<target>[^\|]+?)(?:\s*\|\s*(?P<mods>.+))?$'
  modifier_pair: '(?P<key>[A-Z]+):(?P<value>[^\|]+)'
