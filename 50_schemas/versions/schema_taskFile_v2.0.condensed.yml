meta: {name: Task File Schema, v: 2.0.0, date: 2025-12-11, status: active, desc: "req_XXXX_slug.md task files", used_by: protocol_taskCoordination}
v2_changes: [added session field, added bundle support]

naming:
  file: "req_XXXX_slug.md"
  folder: "req_XXXX_slug/"
  claimed: "claimed_{YYYYMMDD_HHMMSS}_{pid}_req_XXXX_slug/"
  id_source: "_NNNN_next_req_id (plain text, increment after creation)"

required:
  title: {format: "# Request #XXXX: Title", validate: must match filename}
  type: {format: "**Type:** {value}", default: Standard, values: [Standard, Research, Installation, Testing, Emergency, Maintenance]}
  priority: {format: "**Priority:** {value}", default: NORMAL, values: [LOW, NORMAL, HIGH, URGENT, CRITICAL]}
  posted: {format: "**Posted:** {ISO 8601}", example: "2025-11-23T15:30:00-06:00"}
  description: {format: "## Task Description\n{markdown}", min: 1 sentence}
  expected_response: {format: "## Expected Response\n{desc}", purpose: completion criteria}

optional:
  commands: {format: "## Task Commands\n```bash\n{cmds}\n```", omit: "worker decides"}
  discrete: {format: "**Discrete:** true|false", default: false, desc: "if true, no subdivision"}
  target_worker: {format: "**Target Worker:** {type}|{type}:{pid}", omit: "any worker may claim"}
  session: {format: "**Session:** {name|id}", NEW_v2: true, purpose: "persistent agent expertise", registry: ~/.claude/session_registry.yml, launch: "claude --project {p} --session-id {s} 'prompt'"}
  entry_criteria: {format: "## Entry Criteria\n{list}", omit: "start immediately"}
  exit_criteria: {format: "## Exit Criteria\n{list}", omit: "worker judgment"}
  depends_on: {format: "**Depends On:** req_XXXX, req_YYYY", status: "WALK STAGE - Task Sets"}
  sequence: {format: "**Sequence:** {NNN}", status: "WALK STAGE - Task Sets"}
  notes: {format: "## Notes\n{context}"}

session_use_cases:
  persistent: [role-based agents, long-running projects, builds on prior work]
  ephemeral: [one-off tasks, parallel workers, experiments, fresh perspective]

validation:
  errors: [filename_matches_title, required_sections_present, valid_type, valid_priority, valid_timestamp, description_not_empty]
  warnings: [expected_response_not_empty]

template: |
  # Request #XXXX: {Title}
  **Type:** Standard
  **Priority:** NORMAL
  **Posted:** {ISO 8601}
  **Session:** {name}  # optional
  ## Task Description
  {content}
  ## Task Commands
  ```bash
  {commands}
  ```
  ## Expected Response
  {format/content description}
  ## Notes
  {optional context}

refs: [protocol_taskCoordination, response_schema, error_schema]
