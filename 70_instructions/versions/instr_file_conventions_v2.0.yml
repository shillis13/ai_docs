---
metadata:
  title: File Format and Directory Structure Conventions
  version: 2.0.0
  last_updated: 2025-11-03
  maintainer: PianoMan
  status: active
  source_file: instr_file_conventions_v1_0.md
  migration_notes: Converted from Markdown to YAML as part of req_1019

table_of_contents:
  - section: 1. Purpose
    key: purpose
  - section: "2. Source Data Format: YAML"
    key: source_data_format_yaml
    subsections:
      - YAML as Source of Truth
      - File Relationships
      - When to Read Which Format
      - Not All MD Files Are Generated
  - section: 3. Directory Structure Patterns
    key: directory_structure_patterns
    subsections:
      - Numbered Directories
      - Common Directory Names
      - File Naming Conventions
      - Symlinks for Cross-References
  - section: 4. Context Window Optimization
    key: context_window_optimization
    subsections:
      - File Format Impact on Token Usage
      - File Size Guidelines
  - section: 5. Tool Selection for File Operations
    key: tool_selection_for_file_operations
    subsections:
      - When to Use Desktop Commander vs Filesystem Connector
      - Reading Large Files
  - section: 6. Quick Reference
    key: quick_reference
    subsections:
      - File Format Decision Tree
      - Directory Navigation Tips
      - Common Locations
  - section: 7. Best Practices
    key: best_practices
    subsections:
      - For Claude Instances
      - For Users (PianoMan)
  - section: 8. Examples
    key: examples
    subsections:
      - Memory Digest Pattern
      - Protocol Evolution
      - Multi-AI Workspace
  - section: Revision History
    key: revision_history

purpose:
  |
  - Establish YAML as canonical source format for structured data
  - Define when Markdown files are generated vs primary
  - Document directory structure patterns for navigation
  - Enable Claude instances to understand file relationships
source_data_format_yaml:
  yaml_as_source_of_truth: |
  - **Structured data** (configs, protocols, specifications, memory digests) → YAML is source
  - **Generated Markdown** (`.yml.md` files) are human-readable pretty-prints
  - **Edit YAML files** when making changes, regenerate MD versions
  - **Context optimization** - YAML loads on-demand, MD auto-loads (token cost difference)  file_relationships: |
  ```
  protocol_v3.yml          # SOURCE - edit this
  protocol_v3.yml.md       # GENERATED - for humans, regenerate after edits
  
  memory_digest.yml        # SOURCE - structured data
  memory_digest.yml.md     # GENERATED - pretty-printed for reading
  ```  when_to_read_which_format: |
  **Read YAML when:**
  - Need structured data for processing
  - Parsing for tool input
  - Programmatic access required
  - Want minimal token usage
  
  **Read Markdown when:**
  - Human reviewing content
  - Context window has room
  - Pretty formatting aids understanding
  - No processing needed  not_all_md_files_are_generated: |
  **Primary Markdown:**
  - `README.md` - Documentation (hand-written)
  - `notes.md` - Task notes (hand-written)
  - `CHANGELOG.md` - History (hand-maintained)
  - Blog posts, essays, documentation
  
  **Generated Markdown:**
  - `*.yml.md` - Pretty-printed from YAML
  - Auto-generated reports
  - Tool output files
  
  **Rule of thumb:** If there's a `.yml` file with same base name, the `.md` is generated.
directory_structure_patterns:
  numbered_directories: |
  Directories with numeric prefixes indicate ordering or categorization:
  
  ```
  ~/Documents/AI/
  ├── 00_inbox/              # Incoming items, unsorted
  ├── 05_memories/           # Memory digests and context
  │   ├── 10_archive/        # Historical, rarely accessed
  │   ├── 50_active/         # Current working context
  │   └── 90_templates/      # Reusable templates
  ├── 10_projects/           # Active development work
  ├── 20_tools/              # Scripts and utilities
  ├── 30_data/               # Raw data and datasets
  └── 40_digests/            # Processed summaries
      └── todos/             # TODO system (unnumbered subdirs)
  ```
  
  **Numbering scheme:**
  - **00-09:** Temporary/transient (inbox, scratch)
  - **10-19:** Active work
  - **20-29:** Tools and utilities
  - **30-39:** Data and resources
  - **40-49:** Processed outputs
  - **50-59:** Active/current state
  - **80-89:** Configuration and settings
  - **90-99:** Templates and archives  common_directory_names: |
  **Standard patterns across projects:**
  - `bin/` - Executable scripts
  - `data/` - Data files, inputs, outputs
  - `docs/` - Documentation
  - `scripts/` - Helper utilities
  - `src/` - Source code
  - `tests/` - Test files
  - `tmp/` or `temp/` - Temporary files
  - `archive/` - Old/inactive content
  - `templates/` - Reusable patterns
  
  **AI-specific conventions:**
  - `coordination/` - CLI coordination protocol files
  - `broadcasts/` - Tasks for any CLI
  - `direct/` - Assigned to specific instances
  - `responses/` - Completed work results
  - `announcements/` - Inter-AI messaging
  - `to_desktop_claude/` - Prompt queue for Desktop  file_naming_conventions: |
  **Prefixes indicate purpose:**
  - `instr_*.md` - Instruction files
  - `spec_*.yml` - Specifications
  - `protocol_*.md` - Protocol definitions
  - `task_*` - TODO system tasks
  - `req_NNNN_*.md` - CLI coordination requests
  - `*.status` - Status markers (empty files)
  - `*.flag` - Workflow flags (empty files)
  - `*.tag` - Domain tags (empty files)
  
  **Version suffixes:**
  - `*_v1.md` or `*_v01.yml` - Versioned documents
  - `*_draft.md` - Work in progress
  - `*_YYYYMMDD.md` - Date-stamped versions  symlinks_for_cross_references: |
  - `task_*/data/` - Contains symlinks to related files
  - `scripts@` - Symlinks to shared script directories
  - Relative symlinks preferred (survive moves)
context_window_optimization:
  file_format_impact_on_token_usage: |
  **Markdown files:**
  - Auto-load into context as project knowledge
  - Full content counts against token limit
  - Use for small, frequently needed docs
  
  **YAML files:**
  - Load on-demand via `view` tool
  - Only consume tokens when explicitly read
  - Use for large structured data
  
  **Strategy:**
  - Keep frequently accessed, small docs in `.md`
  - Keep large, occasionally needed data in `.yml`
  - Generate `.yml.md` for human review without context cost
  - Can have 2-3x longer conversations with YAML approach  file_size_guidelines: |
  **Auto-load as Markdown (<10KB):**
  - Core instructions
  - Frequently referenced specs
  - Quick reference guides
  
  **Keep as YAML (>10KB):**
  - Large memory digests
  - Comprehensive protocols
  - Detailed specifications
  - Historical archives
tool_selection_for_file_operations:
  when_to_use_desktop_commander_vs_filesystem_connector: |
  **Use Desktop Commander for:**
  - Process management (REPLs, long-running commands)
  - Search operations (content and file search)
  - Large file operations (read_file with offset/length)
  - System commands requiring shell access
  - Interactive workflows
  
  **Use Filesystem Connector for:**
  - Simple file reads/writes
  - Directory listings
  - File moves/renames
  - Basic file operations
  - When Desktop Commander unavailable
  
  **Both work for basic operations - Desktop Commander has more features.**  reading_large_files: |
  ```python
  desktop_commander:read_file(
      path="/path/to/large.log",
      offset=-100,  # Last 100 lines
      length=100
  )
  
  desktop_commander:start_search(
      path="/path/to/dir",
      pattern="error",
      searchType="content"
  )
  ```
quick_reference:
  file_format_decision_tree: |
  ```
  Is it structured data? (protocol, spec, config, digest)
  ├─ YES → Use YAML as source
  │  ├─ Small (<5KB)? → Keep MD version too
  │  └─ Large (>5KB)? → YAML only, generate .yml.md on demand
  └─ NO → Is it prose/documentation?
     ├─ YES → Markdown primary
     └─ NO → Use appropriate format (code, CSV, JSON, etc.)
  ```  directory_navigation_tips: |
  ```bash
  find ~/Documents/AI -name "instr_*.md"
  
  find ~/Documents/AI -name "*.yml" -not -name "*.yml.md"
  
  find ~/Documents/AI -name "*.yml.md"
  
  tree -L 2 ~/Documents/AI/
  ```  common_locations: |
  ```
  ~/Documents/AI/
  ├── Claude/
  │   └── claude_workspace/
  │       ├── 05_memories/50_active/     # Current memory digests
  │       ├── 06_announcements/          # Inter-AI messaging
  │       └── 09_tasks/                  # Project tasks
  ├── ai_memories/
  │   └── 40_digests/
  │       └── todos/                     # Global TODO system
  ├── ChatGPT/
  │   └── chatty_workspace/
  │       └── 05_memories/50_active/     # Chatty's memories
  └── shared_resources/                  # Cross-AI resources
  ```
best_practices:
  for_claude_instances: |
  **When reading files:**
  1. Check for `.yml` version first (lower token cost)
  2. Use `.yml.md` if you need to show user pretty version
  3. Read only what you need (use offset/length for large files)
  4. Use search tools before reading entire directories
  
  **When writing files:**
  1. Structured data → Write YAML
  2. Human documentation → Write Markdown
  3. Both → Write YAML, note that `.yml.md` needs regeneration
  4. Include clear comments in YAML files
  
  **When organizing:**
  1. Follow numbering conventions
  2. Use descriptive directory names
  3. Keep related files together
  4. Symlink for cross-references, don't duplicate  for_users_pianoman: |
  **Maintaining the system:**
  1. Edit YAML sources, not generated MD
  2. Regenerate `.yml.md` after YAML edits (use doc_converter.py)
  3. Use file tagging system (when implemented) for metadata
  4. Keep directory structure consistent across projects
  
  **Optimization:**
  1. Convert large `.md` files to `.yml` to free context window
  2. Keep only active content in auto-load directories
  3. Archive old/inactive content
  4. Use memory digests instead of full chat histories
examples:
  memory_digest_pattern: |
  ```
  cli_coordination_v3.yml
  
  cli_coordination_v3.yml.md
  
  Claude: view cli_coordination_v3.yml           # Load when needed
  User: cat cli_coordination_v3.yml.md | less   # Human review
  ```  protocol_evolution: |
  ```
  protocol_v1.yml
  protocol_v1.yml.md
  
  protocol_v2.yml
  protocol_v2.yml.md
  
  protocol_v3_draft.yml
  ```  multi_ai_workspace: |
  ```
  shared_resources/
  ├── protocols/
  │   ├── coordination_protocol.yml      # Both AIs read this
  │   └── coordination_protocol.yml.md   # For humans
  ├── specifications/
  │   └── orchestrator_spec.yml
  └── templates/
      └── task_template.yml
  
  Claude/claude_workspace/
  ├── 05_memories/50_active/
  │   ├── cli_coordination.yml          # Claude-specific memory
  │   └── cli_coordination.yml.md
  └── 06_announcements/
      └── to_desktop_claude/            # Prompt queue
  
  ChatGPT/chatty_workspace/
  ├── 05_memories/50_active/
  │   ├── peer_review.yml               # Chatty-specific memory
  │   └── peer_review.yml.md
  └── 06_announcements/
      └── from_claude/                  # Messages from Claude
  ```
  
  ---
revision_history:
  |
  - **1.0.0 (2025-11-03)** - Initial version documenting YAML-as-source pattern and directory conventions
