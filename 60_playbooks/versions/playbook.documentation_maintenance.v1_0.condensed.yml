meta: {v: 1.0.0, created: 2025-12-19, maintainer: PianoMan, status: active}

summary: How to create/update/register docs in ai_root. Ensures consistent structure, versioning, symlinks, cross-refs.

when_to_use: [new docs, significant updates, new glossary terms, restructuring]

prerequisites: [ai_root write access, understand 10_-70_ dirs, YAML condensation]

structure: |
  {doc_type}/
  ├── versions/
  │   ├── {basename}_v1.0.md
  │   └── {basename}_v1.0.condensed.yml
  ├── {basename}_latest.md → versions/...
  └── {basename}_latest.condensed.yml → versions/...

steps:
  1_canonical:
    action: write full MD in versions/
    loc: "versions/{basename}_v{X.Y}.md"
    req: [metadata section, follow type structure, ASCII tables, version matches filename]

  2_condensed:
    action: create condensed YAML (60-80% smaller)
    loc: "versions/{basename}_v{X.Y}.condensed.yml"
    patterns: [prose→YAML, abbreviations, compact examples, remove redundancy]

  3_symlinks:
    cmds: |
      ln -sf versions/{basename}_v{X.Y}.md {basename}_latest.md
      ln -sf versions/{basename}_v{X.Y}.condensed.yml {basename}_latest.condensed.yml
    why: refs use _latest, only symlink changes on version bump

  4_references:
    files:
      _knowledge_manifest.yml: add if discoverable (set load_sequence, triggers, abstract)
      document_registry.yml: add entry (id, filename, title, version, status, path, tags)
      glossary_knowledge_index.yml: "add terms → {d: desc, r: path}"
    criteria: {new_concept: glossary, discoverable: manifest, formal_doc: registry}

  5_verify: [canonical exists versioned, condensed exists matching, symlinks point correctly, refs updated]

issues:
  wrong_symlink: update target with ln -sf
  term_no_trigger: check glossary path, verify condensed exists
  version_mismatch: keep filename and metadata synced

related: [instr_writing.condensed.yml, SCHEMA_EVOLUTION_GUIDE.md, instr_file_conventions.condensed.yml]
