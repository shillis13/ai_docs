meta: {v: 1.1, status: draft}

purpose: Structured comment blocks in chats/PRs/files as machine-readable markers for experiment correlation, memory capture, navigation bookmarks, decisions, questions

syntax: |
  <<<INSERT type=<TYPE> v=<INT>>>
  { JSON PAYLOAD }
  <<<END INSERT>>>

detection_regex: "^<<<INSERT\\s+type=(\\w+)\\s+v=(\\d+)>>>[\\r\\n]+([\\s\\S]*?)^<<<END INSERT>>>$"

types:
  experiment_v1.0:
    CTI_EXPERIMENT: {desc: "intent and setup", fields: [biases, hypothesis, knobs, metrics, links]}
    RUN_METADATA: {desc: "runtime info", fields: [task_version, model_hint, exec_time_sec, artifacts]}
    PR_REVIEW: {desc: "evaluation", fields: [variants_reviewed, scores, winner, recommendations, links]}
    EXPERIMENT_RESULT: {desc: "final decision", fields: [decision, key_findings, next_actions]}

  memory_v1.1:
    BOOKMARK: {desc: "navigation point", fields: [label, context, resume_hint, message_count]}
    MEMORY: {desc: "captured insight", fields: [topic, content, source, importance, related]}
    DECISION: {desc: "conclusion reached", fields: [topic, decision, rationale, alternatives_considered, related]}
    QUESTION: {desc: "open question", fields: [question, context, blocked_by, priority, related]}

base_fields:
  experiment: [experiment_id, project, task_title, mode, guidance, ts, author, notes]
  memory: [ts, author, tags]

memory_holder_chats:
  concept: domain expert repositories with accumulated deep context
  workflow: [create chat with purpose, load context, insert BOOKMARK, engage, capture MEMORY/DECISION, resume via bookmarks]

platform_guidance:
  Desktop: harvest inserts → write to memory stores
  Web/iOS: write inserts inline, Desktop harvests later

processing:
  experiment: scan → parse → group by experiment_id → output CSV/dossier
  memory: scan → categorize → route (MEMORY→store, DECISION→log, QUESTION→tracker, BOOKMARK→index)

future_v1.2: [YAML payloads, PR linkage, insert chaining, confidence fields, expiration dates]
